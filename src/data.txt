CREATE DATABASE research_manage
  DEFAULT CHARACTER SET utf8mb4
  COLLATE utf8mb4_general_ci;


 USE research_manage;

CREATE TABLE sys_user (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) NOT NULL UNIQUE,
  password VARCHAR(100) NOT NULL,
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE researcher (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  code VARCHAR(50) NOT NULL,
  college VARCHAR(100),
  title VARCHAR(50),
  phone VARCHAR(20),
	create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
  update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE project (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    code VARCHAR(100) NOT NULL,
    type VARCHAR(100),
    duration VARCHAR(50),
    leader VARCHAR(100),
    status int,
    description TEXT,
	create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
)

CREATE TABLE project_researcher (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    project_id BIGINT NOT NULL,
    researcher_id BIGINT NOT NULL,
    role VARCHAR(50),
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_project_researcher (project_id, researcher_id)
);


CREATE TABLE paper (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    author VARCHAR(100) NOT NULL,
    journal VARCHAR(255),
    source VARCHAR(50),
    publish_date DATE,
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
)



CREATE TABLE book (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
   	name VARCHAR(255) NOT NULL COMMENT '著作名称',
	author VARCHAR(255) NOT NULL COMMENT '作者（逗号分隔）',
	publisher VARCHAR(255) COMMENT '出版社',
	publish_date DATE COMMENT '出版日期',
	isbn VARCHAR(50) COMMENT 'ISBN',
	description TEXT COMMENT '简介',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
)


CREATE TABLE award (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  target_type VARCHAR(20) NOT NULL COMMENT 'PROJECT / ACHIEVEMENT',
  target_id BIGINT NOT NULL COMMENT '关联对象ID',

  name VARCHAR(255) NOT NULL COMMENT '奖项名称',
  level VARCHAR(50) COMMENT '奖项级别',
  award_rank VARCHAR(50) COMMENT '奖项等级',
  organization VARCHAR(255) COMMENT '授奖单位',
  award_date DATE COMMENT '获奖时间',
  description VARCHAR(500) COMMENT '备注',
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
  update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

